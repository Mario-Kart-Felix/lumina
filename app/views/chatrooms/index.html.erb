<div class="d-flex">
  <%= render 'components/side_bar/side_bar_final' %>

  <!-- <h2 style="color:white"><%#= current_user.first_name %>'s Messages</h2> -->
  <div class="container d-flex  justify-content-between">

    <!-- Left Column (Chatrooms) -->
    <div class="container w-25 border">
      <% @chatrooms.each do |chatroom| %>
        <%= link_to chatrooms_path(chatroom: chatroom.id) do %>
          <div class="conversation" data-chatroom-id="<%= chatroom.id %>">
            <% if chatroom == current_user %>
              <%= cl_image_tag(chatroom.user.avatar.key, :fetch_format=>:auto, :class=>"avatar") %>
            <% else %>
              <%= cl_image_tag(chatroom.user_two.avatar.key, :fetch_format=>:auto, :class=>"avatar") %>
            <% end %>

            <p id="chatroom-name"><%= link_to "#{chatroom.user_two.first_name}", chatroom_path(chatroom), class: "list-group-item #{'active' if chatroom == @chatroom}"%></p>
          </div>
        <% end %>
      <% end %>
    </div>

    <!-- Right Column (Individual Chatroom Messages) -->

    <div class="container w-75 border">
      <% if @current_chatroom %>
        <%= render 'show', current_chatroom: @current_chatroom, messages: @messages, message: Message.new %>
      <% end %>
    </div>

  </div>
</div>
<!-- We want to show the individual message threads AND the messages all on one page -->
